From 6505b73d90b7680dea221492ea3cc3686d830a65 Mon Sep 17 00:00:00 2001
From: minggLu <mylu@bu.edu>
Date: Thu, 30 Jul 2015 12:19:47 -0400
Subject: [PATCH] fix the wrong machine name to ssh in para-provision.sh

update readme
---
 bigtop-deploy/vm/vagrant-puppet-openstack/README.md         | 5 +++++
 bigtop-deploy/vm/vagrant-puppet-openstack/para-provision.sh | 2 +-
 2 files changed, 6 insertions(+), 1 deletion(-)

diff --git a/bigtop-deploy/vm/vagrant-puppet-openstack/README.md b/bigtop-deploy/vm/vagrant-puppet-openstack/README.md
index bff0062..9af7a85 100644
--- a/bigtop-deploy/vm/vagrant-puppet-openstack/README.md
+++ b/bigtop-deploy/vm/vagrant-puppet-openstack/README.md
@@ -133,6 +133,11 @@ for ((i=1; i<=$NUM_INSTANCE; i++)); do
 name_of_your_vm$i
 EOF
 ```
+* If you are also running smoke tests, you will have to change the machine name in line 74 
+
+```
+    vagrant ssh name_of_your_vm$NUM_INSTANCE -c "sudo su <<HERE 
+```
 
 * In `Vagrantfile` the run smoke test part is currently commented out, in order to run smoke test after **all** the machines are done provisioning. The smoke tests are currently being handled by `para-provision.sh`. 
 
diff --git a/bigtop-deploy/vm/vagrant-puppet-openstack/para-provision.sh b/bigtop-deploy/vm/vagrant-puppet-openstack/para-provision.sh
index ea39b36..e92b59e 100755
--- a/bigtop-deploy/vm/vagrant-puppet-openstack/para-provision.sh
+++ b/bigtop-deploy/vm/vagrant-puppet-openstack/para-provision.sh
@@ -71,7 +71,7 @@ done | parallel_provision
 echo "preparing for smoke tests..."
 if [ "$RUN_SMOKE_TESTS" = "true" ]; then
     echo "running smoke tests..."
-    vagrant ssh hadoop-bigtop-para$NUM_INSTANCE -c "sudo su <<HERE
+    vagrant ssh hadoop-bigtop$NUM_INSTANCE -c "sudo su <<HERE
     cd /bigtop-home/bigtop-tests/smoke-tests 
     export HADOOP_CONF_DIR=/etc/hadoop/conf/ 
     export BIGTOP_HOME=/bigtop-home/ 
-- 
2.3.2 (Apple Git-55)

